---
import PageList from "@/components/PageList.astro";
import Layout from "@/layouts/BaseLayout.astro";
---

<Layout title="Budget" noindex>
    <link
        rel="manifest"
        href="/tools/budget/budget.webmanifest"
        slot="custom-head"
    />
    <PageList
        pages={[
            {
                name: "overview",
                link: "/tools/budget/",
            },
            {
                name: "income",
                link: "/tools/budget/income/",
            },
            {
                name: "transactions",
                link: "/tools/budget/transactions/",
            },
            {
                name: "settings",
                link: "/tools/budget/settings/",
            },
        ]}
    />
    <hr />
    <slot />
</Layout>

<script lang="ts">
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker
            .register("/tools/budget/sw.js", { scope: "/tools/budget/" })
            .then((registration) => {
                registration.update();
            });
    }

    if (window.matchMedia("(display-mode: standalone)").matches) {
        document.querySelector("nav").remove();
    }
</script>
